<div class="border-slate-800 flex flex-col gap-3">
  <!-- Header -->
  <div
    class="flex flex-col md:flex-row md:items-center md:justify-between gap-4"
  >
    <h1 class="text-3xl font-bold text-white">Gestión de Inventario</h1>
    <!-- Controles: buscador + filtros -->
    <div
      class="flex flex-col md:flex-row items-stretch md:items-center gap-3 w-full md:w-auto"
    >
      <!-- Buscador -->
      <searcher></searcher>
    </div>
  </div>

  <!-- Tabla -->
  <div class="h-auto w-full overflow-auto rounded-lg border border-slate-800">
    <table class="min-w-full text-sm text-left text-gray-300">
      <thead class="text-xs uppercase bg-slate-800 text-gray-400 sticky top-0">
        <tr>
          <th class="px-4 py-3 font-medium">ID</th>
          <th class="px-4 py-3 font-medium">Nombre</th>
          <th class="px-4 py-3 font-medium">Categoría</th>
          <th class="px-4 py-3 font-medium">Stock</th>
          <th class="px-4 py-3 font-medium">Ubicación</th>
          <th class="px-4 py-3 font-medium">Estado</th>
          <th class="px-4 py-3 font-medium text-center">Acciones</th>
        </tr>
      </thead>

      <tbody class="divide-y divide-slate-800">
        <tr
          *ngFor="let producto of productos"
          class="hover:bg-slate-800/60 transition"
        >
          <td class="px-4 py-4 text-gray-300">{{ producto.id }}</td>
          <td class="px-4 py-4 text-gray-300">{{ producto.nombre }}</td>
          <td class="px-4 py-4 text-gray-300">{{ producto.categoria }}</td>
          <td class="px-4 py-4 text-gray-300">{{ producto.stock }}</td>
          <td class="px-4 py-4 text-gray-300">{{ producto.ubicacion }}</td>

          <td class="px-4 py-4">
            <span
              [ngClass]="{
                'text-red-500 font-semibold':
                  producto.stock <= producto.stockMin,
                'text-green-500 font-semibold':
                  producto.stock > producto.stockMin
              }"
            >
              {{
                producto.stock <= producto.stockMin
                  ? "Bajo stock"
                  : "Disponible"
              }}
            </span>
          </td>

          <td class="px-4 py-4 text-center space-x-3">
            <button
              class="bg-indigo-600 text-gray-200 px-3 py-1 rounded hover:bg-indigo-700 transition"
              (click)="openModal(producto, 'view')"
            >
              Ver
            </button>
            <button
              class="bg-yellow-600 text-gray-200 px-3 py-1 rounded hover:bg-yellow-700 transition"
              (click)="openModal(producto, 'edit')"
            >
              Editar
            </button>
            <button
              class="bg-red-600 text-gray-200 px-3 py-1 rounded hover:bg-red-700 transition"
              (click)="openModal(producto, 'delete')"
            >
              Eliminar
            </button>
          </td>
        </tr>

        <!-- Fila vacía (sin resultados) -->
        <tr *ngIf="productos.length === 0">
          <td
            colspan="7"
            class="text-center py-6 text-gray-400 bg-slate-800 rounded-b-lg"
          >
            No se encontraron productos en el inventario.
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Paginación -->

  <pagination
    [currentPage]="paginationService.currentPage()"
    [totalPages]="paginationService.totalPages()"
    (pageChange)="paginationService.goToPage($event)"
  />

  <!-- Resumen -->
  <div class="flex gap-4 mb-2 items-center">
    <div class="flex items-center gap-2 bg-slate-800 p-5 rounded-xl shadow">
      <p class="text-lg text-white">Insumos totales:</p>
      <h3 class="text-xl font-bold text-white">{{ totalProductos }}</h3>
    </div>
    <div class="flex items-center gap-2 bg-slate-800 p-5 rounded-xl shadow">
      <p class="text-lg text-white">Productos en bajo stock:</p>
      <h3 class="text-xl font-bold text-red-500">{{ bajoStock }}</h3>
    </div>
  </div>
</div>
